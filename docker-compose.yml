services:
  mysql:
    image: mysql:9.2.0
    container_name: mysql_1
    environment:
      MYSQL_ROOT_PASSWORD: ${MYSQL_ROOT_PASSWORD}
      MYSQL_DATABASE: exam_db
    ports:
      - "3306:3306"
    volumes:
      - ./db/:/var/lib/mysql

  mongodb:
    image: mongo:latest
    restart: always
    container_name: mongodb
    # 접근 포트 설정 (컨테이너 외부:컨테이너 내부)
    ports:
      - "27017:27017"
    # 환경 변수 설정
    environment:
      # MongoDB 계정 및 패스워드 설정 옵션
      MONGO_INITDB_ROOT_USERNAME:
      MONGO_INITDB_ROOT_PASSWORD:
    # 볼륨 설정
    volumes:
      - ./data/mongodb:/data/db

  redis:
    image: redis:latest
    container_name: redis_1
    restart: unless-stopped
    ports:
      - "6379:6379"
    environment:
      - TZ=Asia/Seoul
      - REDIS_PASSWORD=${REDIS_PASSWORD}
    command: ["redis-server", "--requirepass", "${REDIS_PASSWORD}"]  # 비밀번호 강제 설정

  npm:
    image: jc21/nginx-proxy-manager:latest
    container_name: npm_1
    restart: unless-stopped
    ports:
      - "80:80"
      - "443:443"
      - "81:81"
    environment:
      - TZ=Asia/Seoul
    volumes:
      - /dockerProjects/npm_1/volumes/data:/data
      - /dockerProjects/npm_1/volumes/etc/letsencrypt:/etc/letsencrypt